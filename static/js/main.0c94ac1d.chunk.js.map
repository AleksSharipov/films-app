{"version":3,"sources":["utils/api.js","components/Film/Film.js","components/List/List.js","components/ImagePopup/ImagePopup.js","components/root/index.js","index.js"],"names":["api","baseUrl","this","url","fetch","method","then","res","ok","json","Promise","reject","Error","status","Film","film","handleCardClick","link","medium_cover_image","id","className","alt","title_english","src","year","rating","onClick","e","List","films","onCardClick","map","ImagePopup","card","onClose","useState","inpValue","setInpValue","comments","setComments","name","comment","value","commentId","console","log","prev","filter","c","type","onChange","target","placeholder","preventDefault","Math","random","Root","setFilms","showCard","setShowCard","useEffect","getFilms","data","movies","catch","err","obj","cardAddComment","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0c94ac1d.chunk.js","sourcesContent":["class Api{\r\n  constructor(baseUrl) {\r\n    this.url = baseUrl;\r\n  }\r\n\r\n  getFilms(){\r\n    return fetch(`${this.url}`, {\r\n      method: 'GET',\r\n    })\r\n      .then((res) =>{\r\n        if(res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(new Error(`Error ${res.status}`));\r\n      })\r\n  }\r\n\r\n  \r\n}\r\n\r\nconst baseUrl = 'https://yts.mx/api/v2/list_movies.json';\r\n\r\nexport const api = new Api(baseUrl);","\r\n// import { useState, useEffect } from 'react';\r\n\r\nexport default function Film({film, handleCardClick}){\r\n\r\n  // const [comments, setComments] = useState([]);\r\n\r\n  const link = film.medium_cover_image;\r\n  const id = film.id;\r\n\r\n  function handleClick(e) {\r\n    handleCardClick({\r\n      link,\r\n      id\r\n    })\r\n  }\r\n\r\n  return(\r\n    <li className=\"film\">\r\n      <img className=\"film_img\" alt={film.title_english} src={film.medium_cover_image}></img>\r\n      <h2 className=\"film_title\">{film.title_english} ({film.year})</h2>\r\n      {/* <p>Year: </p> */}\r\n      <div className=\"film_description\"> \r\n        <p>Rating: {film.rating}</p>\r\n        <button onClick={handleClick} className=\"film_btn\">Add comment</button>\r\n      </div>\r\n      \r\n    </li>\r\n  )\r\n}","import Film from '../Film/Film';\r\n\r\n\r\nexport default function List({films,onCardClick}){\r\n  return(\r\n    <section>\r\n      <ul className=\"films\">\r\n        {\r\n          films.map((film)=>{\r\n            return(\r\n              <Film\r\n                key={film.id}\r\n                film={film}\r\n                handleCardClick = {onCardClick}\r\n              />\r\n            )\r\n          })\r\n        }\r\n      </ul>\r\n    </section>\r\n  )\r\n}","import { useState} from 'react';\r\n\r\nexport default function ImagePopup({card, onClose}){\r\n\r\n  const [inpValue, setInpValue] = useState('');\r\n  const [comments, setComments] = useState([]);\r\n\r\n  function addComment(e){\r\n    e.preventDefault();\r\n    if(inpValue){\r\n      setComments((prev)=>[...prev, {\r\n        value:inpValue,\r\n        id: card.id,\r\n        commentId: Math.random()\r\n      }]);\r\n      setInpValue('');\r\n      \r\n    }\r\n  }\r\n\r\n  function changeInpValue(e){\r\n    setInpValue(e.target.value);\r\n  }\r\n\r\n  function deliteComment(id){\r\n    console.log(id);\r\n    setComments(prev => prev.filter(c => c.commentId !== id));\r\n  }\r\n\r\n  return (\r\n    <section className={card.link ? `popup popup-show-card popup_opened` : `popup popup-show-card`}\r\n      >\r\n\r\n    <div className=\"popup__fullcard\">\r\n    <div className=\"popup__body popup__body-card\">\r\n        \r\n        <img className=\"popup__img\" src={card.link} alt={card.name} />\r\n      </div>\r\n      <div className=\"popup__comment\">\r\n        <div className=\"popup__comment_list\">\r\n          {\r\n            comments.map((comment) => {\r\n              if(card.id === comment.id){\r\n                return (\r\n                  <div key={comment.commentId}>\r\n                  <p className=\"popup__comment_text\"><span className=\"popup__comment_text-bold\">Пользователь: </span>{comment.value}</p>\r\n                  <button \r\n                    onClick={()=>{\r\n                      deliteComment(comment.commentId)\r\n                    }}\r\n                    className=\"popup__del\" \r\n                  >Удалить</button>\r\n                  </div>\r\n                )\r\n              }\r\n            })\r\n          }\r\n        </div>\r\n        <form   className=\"popup__form\">\r\n          <button \r\n            className=\"popup__close button-hover\" \r\n            type=\"button\" \r\n            onClick={onClose}\r\n          />\r\n            <input \r\n              value={inpValue} \r\n              onChange={changeInpValue}\r\n              placeholder=\"comment\"\r\n              className=\"popup__input\"\r\n            />\r\n            <button onClick={addComment} className=\"popup__form-btn\">Add</button>\r\n          </form>\r\n      </div>\r\n    </div>\r\n     \r\n      \r\n    </section>\r\n  )\r\n}","import { useState, useEffect } from 'react';\r\nimport { api } from '../../utils/api';\r\nimport List from '../List/List';\r\nimport ImagePopup from '../ImagePopup/ImagePopup';\r\n\r\nexport default function Root(){\r\n  const [films, setFilms] = useState([]);\r\n  const [showCard, setShowCard] = useState({});\r\n\r\n  useEffect(()=>{\r\n    api.getFilms()\r\n      .then((res)=>{\r\n        setFilms(res.data.movies)\r\n      })\r\n      .catch(err=>console.log(err))\r\n  },[]);\r\n\r\n  const cardAddComment = (obj) => {\r\n    console.log(obj.comments)\r\n  }\r\n\r\n  const handleCardClick = (obj) =>{\r\n    // console.log(obj)\r\n    return setShowCard(obj)\r\n  }\r\n\r\n  const closePopup = () => {\r\n    setShowCard({});\r\n  }\r\n\r\n  return(\r\n    <div className=\"root\">\r\n      <List\r\n        films={films}\r\n        onCardClick = {handleCardClick}\r\n      />\r\n      <ImagePopup\r\n        card={showCard}\r\n        onClose={closePopup}\r\n        cardAddComment={cardAddComment}\r\n      />\r\n    </div>\r\n  )\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Root from './components/root';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Root/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}