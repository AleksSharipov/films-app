(this.webpackJsonpfilms=this.webpackJsonpfilms||[]).push([[0],{14:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),i=c(6),o=c.n(i),a=(c(14),c(2)),l=c(7),r=c(8),u=new(function(){function e(t){Object(l.a)(this,e),this.url=t}return Object(r.a)(e,[{key:"getFilms",value:function(){return fetch("".concat(this.url),{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Error ".concat(e.status)))}))}}]),e}())("https://yts.mx/api/v2/list_movies.json"),m=c(0);function d(e){var t=e.film,c=e.handleCardClick,n=t.medium_cover_image,s=t.id;return Object(m.jsxs)("li",{className:"film",children:[Object(m.jsx)("img",{className:"film_img",alt:t.title_english,src:t.medium_cover_image}),Object(m.jsxs)("h2",{className:"film_title",children:[t.title_english," (",t.year,")"]}),Object(m.jsxs)("div",{className:"film_description",children:[Object(m.jsxs)("p",{children:["Rating: ",t.rating]}),Object(m.jsx)("button",{onClick:function(e){c({link:n,id:s})},className:"film_btn",children:"Add comment"})]})]})}function p(e){var t=e.films,c=e.onCardClick;return Object(m.jsx)("section",{children:Object(m.jsx)("ul",{className:"films",children:t.map((function(e){return Object(m.jsx)(d,{film:e,handleCardClick:c},e.id)}))})})}var j=c(9);function b(e){var t=e.card,c=e.onClose,s=Object(n.useState)(""),i=Object(a.a)(s,2),o=i[0],l=i[1],r=Object(n.useState)([]),u=Object(a.a)(r,2),d=u[0],p=u[1];return Object(m.jsx)("section",{className:t.link?"popup popup-show-card popup_opened":"popup popup-show-card",children:Object(m.jsxs)("div",{className:"popup__fullcard",children:[Object(m.jsx)("div",{className:"popup__body popup__body-card",children:Object(m.jsx)("img",{className:"popup__img",src:t.link,alt:t.name})}),Object(m.jsxs)("div",{className:"popup__comment",children:[Object(m.jsx)("div",{className:"popup__comment_list",children:d.map((function(e){if(t.id===e.id)return Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"popup__comment_text",children:[Object(m.jsx)("span",{className:"popup__comment_text-bold",children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c: "}),e.value]}),Object(m.jsx)("button",{onClick:function(){var t;t=e.commentId,console.log(t),p((function(e){return e.filter((function(e){return e.commentId!==t}))}))},className:"popup__del",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},e.commentId)}))}),Object(m.jsxs)("form",{className:"popup__form",children:[Object(m.jsx)("button",{className:"popup__close button-hover",type:"button",onClick:c}),Object(m.jsx)("input",{value:o,onChange:function(e){l(e.target.value)},placeholder:"comment",className:"popup__input"}),Object(m.jsx)("button",{onClick:function(e){e.preventDefault(),o&&(p((function(e){return[].concat(Object(j.a)(e),[{value:o,id:t.id,commentId:Math.random()}])})),l(""))},className:"popup__form-btn",children:"Add"})]})]})]})})}function f(){var e=Object(n.useState)([]),t=Object(a.a)(e,2),c=t[0],s=t[1],i=Object(n.useState)({}),o=Object(a.a)(i,2),l=o[0],r=o[1];Object(n.useEffect)((function(){u.getFilms().then((function(e){s(e.data.movies)})).catch((function(e){return console.log(e)}))}),[]);return Object(m.jsxs)("div",{className:"root",children:[Object(m.jsx)(p,{films:c,onCardClick:function(e){return r(e)}}),Object(m.jsx)(b,{card:l,onClose:function(){r({})},cardAddComment:function(e){console.log(e.comments)}})]})}o.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(f,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.0c94ac1d.chunk.js.map